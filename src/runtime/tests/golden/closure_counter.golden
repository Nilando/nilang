fn new_counter() {
  counter = {x:0};

  return fn() {
    x = counter.x;

    counter.x = x + 1;

    return x;
  };
}

my_counter = new_counter();

i = 0;
while i < 10 {
  print(my_counter());
  i = i + 1;
}

%%%%

0
1
2
3
4
5
6
7
8
9
